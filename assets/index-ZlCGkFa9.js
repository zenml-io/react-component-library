import{r as a}from"./index-OjgoNOWw.js";import{j as O}from"./jsx-runtime-DtaoT6pD.js";import{a as x,b}from"./index-bH8-NN_I.js";import{r as P}from"./index-mQqIOHEI.js";function U(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function _(e,t=[]){let n=[];function s(f,u){const c=a.createContext(u),i=n.length;n=[...n,u];function o(m){const{scope:d,children:N,...S}=m,A=(d==null?void 0:d[e][i])||c,g=a.useMemo(()=>S,Object.values(S));return O.jsx(A.Provider,{value:g,children:N})}function p(m,d){const N=(d==null?void 0:d[e][i])||c,S=a.useContext(N);if(S)return S;if(u!==void 0)return u;throw new Error(`\`${m}\` must be used within \`${f}\``)}return o.displayName=f+"Provider",[o,p]}const r=()=>{const f=n.map(u=>a.createContext(u));return function(c){const i=(c==null?void 0:c[e])||f;return a.useMemo(()=>({[`__scope${e}`]:{...c,[e]:i}}),[c,i])}};return r.scopeName=e,[s,v(r,...t)]}function v(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const s=e.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(f){const u=s.reduce((c,{useScope:i,scopeName:o})=>{const m=i(f)[`__scope${o}`];return{...c,...m}},{});return a.useMemo(()=>({[`__scope${t.scopeName}`]:u}),[u])}};return n.scopeName=t.scopeName,n}function I(e){const[t,n]=a.useState(void 0);return x(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const s=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const f=r[0];let u,c;if("borderBoxSize"in f){const i=f.borderBoxSize,o=Array.isArray(i)?i[0]:i;u=o.inlineSize,c=o.blockSize}else u=e.offsetWidth,c=e.offsetHeight;n({width:u,height:c})});return s.observe(e,{box:"border-box"}),()=>s.unobserve(e)}else n(void 0)},[e]),t}function M(e,t){return a.useReducer((n,s)=>t[n][s]??n,e)}var l=e=>{const{present:t,children:n}=e,s=C(t),r=typeof n=="function"?n({present:s.isPresent}):a.Children.only(n),f=b(s.ref,R(r));return typeof n=="function"||s.isPresent?a.cloneElement(r,{ref:f}):null};l.displayName="Presence";function C(e){const[t,n]=a.useState(),s=a.useRef({}),r=a.useRef(e),f=a.useRef("none"),u=e?"mounted":"unmounted",[c,i]=M(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const o=h(s.current);f.current=c==="mounted"?o:"none"},[c]),x(()=>{const o=s.current,p=r.current;if(p!==e){const d=f.current,N=h(o);e?i("MOUNT"):N==="none"||(o==null?void 0:o.display)==="none"?i("UNMOUNT"):i(p&&d!==N?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,i]),x(()=>{if(t){const o=m=>{const N=h(s.current).includes(m.animationName);m.target===t&&N&&P.flushSync(()=>i("ANIMATION_END"))},p=m=>{m.target===t&&(f.current=h(s.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",o),t.addEventListener("animationend",o),()=>{t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",o),t.removeEventListener("animationend",o)}}else i("ANIMATION_END")},[t,i]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:a.useCallback(o=>{o&&(s.current=getComputedStyle(o)),n(o)},[])}}function h(e){return(e==null?void 0:e.animationName)||"none"}function R(e){var s,r;let t=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}export{l as P,U as a,_ as c,I as u};
