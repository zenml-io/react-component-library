import{r as a,a as b}from"./index-OjgoNOWw.js";import{b as v,c as N}from"./index-xcTdDhRm.js";import{r as A}from"./index-mQqIOHEI.js";import{a as h}from"./index-uxD8nXqh.js";function I(e,n,{checkForDefaultPrevented:c=!0}={}){return function(o){if(e==null||e(o),c===!1||!o.defaultPrevented)return n==null?void 0:n(o)}}function y({prop:e,defaultProp:n,onChange:c=()=>{}}){const[t,o]=P({defaultProp:n,onChange:c}),s=e!==void 0,l=s?e:t,f=v(c),u=a.useCallback(r=>{if(s){const i=typeof r=="function"?r(e):r;i!==e&&f(i)}else o(r)},[s,e,o,f]);return[l,u]}function P({defaultProp:e,onChange:n}){const c=a.useState(e),[t]=c,o=a.useRef(t),s=v(n);return a.useEffect(()=>{o.current!==t&&(s(t),o.current=t)},[t,o,s]),c}function S(e,n){return a.useReducer((c,t)=>{const o=n[c][t];return o??c},e)}const M=e=>{const{present:n,children:c}=e,t=O(n),o=typeof c=="function"?c({present:t.isPresent}):a.Children.only(c),s=h(t.ref,o.ref);return typeof c=="function"||t.isPresent?a.cloneElement(o,{ref:s}):null};M.displayName="Presence";function O(e){const[n,c]=a.useState(),t=a.useRef({}),o=a.useRef(e),s=a.useRef("none"),l=e?"mounted":"unmounted",[f,u]=S(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const r=$(t.current);s.current=f==="mounted"?r:"none"},[f]),N(()=>{const r=t.current,d=o.current;if(d!==e){const p=s.current,m=$(r);e?u("MOUNT"):m==="none"||(r==null?void 0:r.display)==="none"?u("UNMOUNT"):u(d&&p!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),N(()=>{if(n){const r=i=>{const m=$(t.current).includes(i.animationName);i.target===n&&m&&A.flushSync(()=>u("ANIMATION_END"))},d=i=>{i.target===n&&(s.current=$(t.current))};return n.addEventListener("animationstart",d),n.addEventListener("animationcancel",r),n.addEventListener("animationend",r),()=>{n.removeEventListener("animationstart",d),n.removeEventListener("animationcancel",r),n.removeEventListener("animationend",r)}}else u("ANIMATION_END")},[n,u]),{isPresent:["mounted","unmountSuspended"].includes(f),ref:a.useCallback(r=>{r&&(t.current=getComputedStyle(r)),c(r)},[])}}function $(e){return(e==null?void 0:e.animationName)||"none"}const T=b.useId||(()=>{});let U=0;function L(e){const[n,c]=a.useState(T());return N(()=>{e||c(t=>t??String(U++))},[e]),e||(n?`radix-${n}`:"")}export{I as $,M as a,y as b,L as c};
